<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Cost Reduction Post Analysis</title>

    <link rel="preconnect" href="https://therealtimex.github.io">
    <link rel="stylesheet" href="https://therealtimex.github.io/rtlibrary/css/rt-ai-html.css">
    <script src="https://therealtimex.github.io/rtlibrary/js/rt-html-abs.js" defer></script>
    <script src="https://therealtimex.github.io/rtlibrary/js/rt-html-css-fallback.js" defer></script>
    <script src="https://therealtimex.github.io/rtlibrary/js/rt-button-status.js" defer></script>
    <script src="https://cdn.jsdelivr.net/gh/MarketingPipeline/Markdown-Tag/markdown-tag.js"></script>

    <style>
        :root {
            --primary-color: ##__COLOR_THEME_PRIMARY__##;
            --secondary-color: ##__COLOR_THEME_SECONDARY__##;
            --accent-color: ##__COLOR_THEME_ACCENT__##;
            --background-color: ##__COLOR_THEME_BACKGROUND__##;
        }
    </style>
    <script>
        function copyMessageArea() {
            const messageArea = document.querySelector('.message-area');
            const text = messageArea.textContent;

            navigator.clipboard.writeText(text)
                .then(() => {
                    const button = event.target.closest('.btn');
                    const originalText = button.textContent;
                    button.textContent = 'Copied!';

                    setTimeout(() => {
                        button.textContent = originalText;
                    }, 2000);
                })
                .catch(err => {
                    console.error('Failed to copy:', err);
                });
        }
    </script>
</head>

<body>
    <div class="email-container">
        <div class="email-info-box">
            <h2>Post Preview</h2>
            <div class="message-area">
                $body
            </div>
        </div>
        <div>
            <strong>‚è∞ Best timing:</strong> $posttime üéØ
        </div>
    </div>
    <footer class="action-buttons">
        <button class="btn-shade" style="--btn-shade: 0%" onclick="callCloudPhone(this)" data-phone="$phone"
            data-video-call="false" data-call-out="true" data-custom-data='{"email": "$recipient"}'
            aria-label="Internet Call">
            <span aria-hidden="true">üåêüìû</span> Internet Call
        </button>
        <button class="btn-shade" style="--btn-shade: 0%" onclick="sendSMS(this)" data-phone="$phone"
            data-default-msg="$body" aria-label="Send SMS">
            <span aria-hidden="true">üí¨</span> Send SMS
        </button>
        <button class="btn-shade" style="--btn-shade: 0%" onclick="callPhone(this)" data-phone="$phone"
            aria-label="Phone Call">
            <span aria-hidden="true">üì±</span> Phone Call
        </button>
        <button class="btn-shade" style="--btn-shade: 0%" onclick="shareContent(this)" data-copy="true"
            data-body="$body" aria-label="Copy Email">
            <span aria-hidden="true">üìã</span> Copy Email
        </button>
        <button class="btn-shade" style="--btn-shade: 0%" onclick="shareContent(this)" data-copy="false"
            data-body="$body" data-subject="Share Email" aria-label="Share">
            <span aria-hidden="true">üì§</span> Share
        </button>
        <button class="btn-shade" style="--btn-shade: 0%" onclick="showBreakdown()" 
            aria-label="Share">
            <span aria-hidden="true">üì§</span> Post Breakdown
        </button>
    </footer>

    <dialog id="breakdownDialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Post Breakdown</h3>
                <button class="close-btn" onclick="closeBreakdown()" aria-label="Close">√ó</button>
            </div>
            <div class="modal-body">
                <md>
                $postbreakdown
                </md>
            </div>
        </div>
    </dialog>
</body>

</html>